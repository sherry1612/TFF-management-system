{% extends "base.html" %}
{% block content %}
<div class="container mt-4">

  <!-- Section 1: Register ICT Member -->
  <div class="card mb-4">
    <div class="card-header">
      <h5>Register ICT Member</h5>
    </div>
    <div class="card-body">
      <a href="{% url 'ICTregister' %}" class="btn btn-primary">Register New ICT Member</a>
    </div>
  </div>

  <!-- Section 2: ICT Member Requests -->
  <div class="card mb-4">
    <div class="card-header">
      <h5>Material Requests</h5>
    </div>
    <div class="card-body">
      {% if pending_requests %}
     

    <table class="table table-bordered mt-2">
        <thead>
            <tr>
                              <th>Requester</th>

                <th>Item name</th>
                <th>Quantity</th>
                <th>Unit</th>
                <th>Department</th>
                <th>Purpose</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for req in material %}
            <tr>
                          <td>{{ req.user.username }}</td>

                <td>{{ req.item_name }}</td>
                <td>{{ req.quantity }}</td>
                <td>{{ req.unit }}</td>
                <td>{{ req.department }}</td>
                <td>{{ req.purpose }}</td>
                <td>{{ req.status }}</td>
                 <td>
              <form method="post" action="{% url 'approve_request' req.id %}" style="display:inline;">
  {% csrf_token %}
  <button type="submit" class="btn btn-success btn-sm">Approve</button>
</form>
<form method="post" action="{% url 'reject_request' req.id %}" style="display:inline;">
  {% csrf_token %}
  <button type="submit" class="btn btn-danger btn-sm">Reject</button>
</form>
<form method="post" action="{% url 'forward_request' req.id %}" style="display: inline;">
  {% csrf_token %}
  
  <div class="form-group" style="display: inline-block; margin-right: 8px;">
    <select name="status" class="form-select form-select-sm" required>
      <option value="" disabled selected>Select destination</option>
      <option value="HR">HR</option>
      <option value="Procurement">Procurement</option>
      <option value="Finance">Finance</option>
    </select>
  </div>

  <button type="submit" class="btn btn-primary btn-sm">Forward</button>
</form>


            </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4">No requests material request submitted yet.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
   

      {% else %}
      <p>No pending material requests .</p>
      {% endif %}
    </div>
  </div>

</div>
<!-- Section 3: Holiday Requests -->
  <div class="card mb-4">
    <div class="card-header">
      <h5>Holiday Requests</h5>
    </div>
    <div class="card-body">
      {% if holiday %}
      <table class="table table-bordered mt-2">
        <thead>
          <tr>
            <th>Requester</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Reason</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          {% for req in holiday %}
          <tr>
            <td>{{ req.user.username }}</td>
            <td>{{ req.start_date }}</td>
            <td>{{ req.end_date }}</td>
            <td>{{ req.reason }}</td>
            <td>{{ req.status }}</td>
            <td>
              <form method="post" action="{% url 'approve_holiday' req.id %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-success btn-sm">Approve</button>
              </form>
              <form method="post" action="{% url 'reject_holiday' req.id %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger btn-sm">Reject</button>
              </form>
              <form method="post" action="{% url 'forward_request' req.id %}" style="display: inline;">
  {% csrf_token %}
  
  <div class="form-group" style="display: inline-block; margin-right: 8px;">
    <select name="status" class="form-select form-select-sm" required>
      <option value="" disabled selected>Select destination</option>
      <option value="HR">HR</option>
      <option value="Procurement">Procurement</option>
      <option value="Finance">Finance</option>
    </select>
  </div>

  <button type="submit" class="btn btn-primary btn-sm">Forward</button>
</form>

            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6">No holiday requests submitted yet.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p>No pending holiday requests.</p>
      {% endif %}
    </div>
  </div>

  <!-- Section 4: Appointment Requests -->
  <div class="card mb-4">
    <div class="card-header">
      <h5>Appointment Requests</h5>
    </div>
    <div class="card-body">
      {% if appointment %}
      <table class="table table-bordered mt-2">
        <thead>
          <tr>
            <th>Requester</th>
            <th>Date</th>
            <th>Time</th>
            <th>Purpose</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          {% for req in appointment %}
          <tr>
            <td>{{ req.user.username }}</td>
            <td>{{ req.date }}</td>
            <td>{{ req.time }}</td>
            <td>{{ req.purpose }}</td>
            <td>{{ req.status }}</td>
            <td>
              <form method="post" action="{% url 'approve_appointment' req.id %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-success btn-sm">Approve</button>
              </form>
              <form method="post" action="{% url 'reject_appointment' req.id %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger btn-sm">Reject</button>
              </form>
              <form method="post" action="{% url 'forward_request' req.id %}" style="display: inline;">
  {% csrf_token %}
  
  <div class="form-group" style="display: inline-block; margin-right: 8px;">
    <select name="status" class="form-select form-select-sm" required>
      <option value="" disabled selected>Select destination</option>
      <option value="HR">HR</option>
      <option value="Procurement">Procurement</option>
      <option value="Finance">Finance</option>
    </select>
  </div>

  <button type="submit" class="btn btn-primary btn-sm">Forward</button>
</form>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6">No appointment requests submitted yet.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p>No pending appointment requests.</p>
      {% endif %}
    </div>
  </div>

</div>


{% endblock %}
